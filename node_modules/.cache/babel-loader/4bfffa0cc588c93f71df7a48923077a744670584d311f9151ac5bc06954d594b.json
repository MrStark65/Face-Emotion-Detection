{"ast":null,"code":"var _jsxFileName = \"D:\\\\emotion-detection\\\\face-emotion-detection\\\\src\\\\components\\\\EmotionDetector.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useCallback } from 'react';\nimport { motion } from 'framer-motion';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport WebcamCapture from './WebcamCapture';\nimport EmotionDisplay from './EmotionDisplay';\nimport LoadingSpinner from './LoadingSpinner';\nimport { analyzeFace } from '../utils/faceApiHelper';\nimport '../styles/components/EmotionDetector.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EmotionDetector = () => {\n  _s();\n  const webcamRef = useRef(null);\n  const [emotions, setEmotions] = useState(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [error, setError] = useState(null);\n  const [captureHistory, setCaptureHistory] = useState([]);\n  const captureAndAnalyze = useCallback(async () => {\n    if (isProcessing) return;\n    try {\n      setIsProcessing(true);\n      setError(null);\n      const imageSrc = webcamRef.current.getScreenshot();\n      const result = await analyzeFace(imageSrc);\n      if (result.faces && result.faces.length > 0) {\n        const newEmotions = result.faces[0].attributes.emotion;\n        setEmotions(newEmotions);\n        setCaptureHistory(prev => [...prev, {\n          timestamp: new Date(),\n          emotions: newEmotions\n        }]);\n        toast.success('Emotion detected successfully!');\n      } else {\n        setError('No face detected. Please try again.');\n        toast.error('No face detected. Please try again.');\n      }\n    } catch (err) {\n      setError('Error processing image. Please try again.');\n      toast.error('Error processing image. Please try again.');\n      console.error(err);\n    } finally {\n      setIsProcessing(false);\n    }\n  }, [isProcessing]);\n  const clearHistory = () => {\n    setCaptureHistory([]);\n    toast.info('History cleared');\n  };\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    className: \"emotion-detector\",\n    initial: {\n      opacity: 0,\n      y: 20\n    },\n    animate: {\n      opacity: 1,\n      y: 0\n    },\n    transition: {\n      duration: 0.5\n    },\n    children: [/*#__PURE__*/_jsxDEV(WebcamCapture, {\n      webcamRef: webcamRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"controls\",\n      children: [/*#__PURE__*/_jsxDEV(motion.button, {\n        className: \"capture-button\",\n        onClick: captureAndAnalyze,\n        disabled: isProcessing,\n        whileHover: {\n          scale: 1.05\n        },\n        whileTap: {\n          scale: 0.95\n        },\n        children: isProcessing ? 'Processing...' : 'Detect Emotion'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), captureHistory.length > 0 && /*#__PURE__*/_jsxDEV(motion.button, {\n        className: \"clear-button\",\n        onClick: clearHistory,\n        whileHover: {\n          scale: 1.05\n        },\n        whileTap: {\n          scale: 0.95\n        },\n        children: \"Clear History\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), isProcessing && /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 24\n    }, this), /*#__PURE__*/_jsxDEV(EmotionDisplay, {\n      emotions: emotions,\n      error: error,\n      history: captureHistory\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      position: \"bottom-right\",\n      autoClose: 3000,\n      hideProgressBar: false,\n      newestOnTop: true,\n      closeOnClick: true,\n      rtl: false,\n      pauseOnFocusLoss: true,\n      draggable: true,\n      pauseOnHover: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(EmotionDetector, \"pGqklOMyJY4Sz2Ro8UwWRt3h7DQ=\");\n_c = EmotionDetector;\nexport default EmotionDetector;\nvar _c;\n$RefreshReg$(_c, \"EmotionDetector\");","map":{"version":3,"names":["React","useRef","useState","useCallback","motion","toast","ToastContainer","WebcamCapture","EmotionDisplay","LoadingSpinner","analyzeFace","jsxDEV","_jsxDEV","EmotionDetector","_s","webcamRef","emotions","setEmotions","isProcessing","setIsProcessing","error","setError","captureHistory","setCaptureHistory","captureAndAnalyze","imageSrc","current","getScreenshot","result","faces","length","newEmotions","attributes","emotion","prev","timestamp","Date","success","err","console","clearHistory","info","div","className","initial","opacity","y","animate","transition","duration","children","fileName","_jsxFileName","lineNumber","columnNumber","button","onClick","disabled","whileHover","scale","whileTap","history","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","_c","$RefreshReg$"],"sources":["D:/emotion-detection/face-emotion-detection/src/components/EmotionDetector.js"],"sourcesContent":["import React, { useRef, useState, useCallback } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport WebcamCapture from './WebcamCapture';\r\nimport EmotionDisplay from './EmotionDisplay';\r\nimport LoadingSpinner from './LoadingSpinner';\r\nimport { analyzeFace } from '../utils/faceApiHelper';\r\nimport '../styles/components/EmotionDetector.css';\r\n\r\nconst EmotionDetector = () => {\r\n  const webcamRef = useRef(null);\r\n  const [emotions, setEmotions] = useState(null);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [captureHistory, setCaptureHistory] = useState([]);\r\n\r\n  const captureAndAnalyze = useCallback(async () => {\r\n    if (isProcessing) return;\r\n\r\n    try {\r\n      setIsProcessing(true);\r\n      setError(null);\r\n\r\n      const imageSrc = webcamRef.current.getScreenshot();\r\n      const result = await analyzeFace(imageSrc);\r\n\r\n      if (result.faces && result.faces.length > 0) {\r\n        const newEmotions = result.faces[0].attributes.emotion;\r\n        setEmotions(newEmotions);\r\n        setCaptureHistory(prev => [...prev, {\r\n          timestamp: new Date(),\r\n          emotions: newEmotions\r\n        }]);\r\n        toast.success('Emotion detected successfully!');\r\n      } else {\r\n        setError('No face detected. Please try again.');\r\n        toast.error('No face detected. Please try again.');\r\n      }\r\n    } catch (err) {\r\n      setError('Error processing image. Please try again.');\r\n      toast.error('Error processing image. Please try again.');\r\n      console.error(err);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  }, [isProcessing]);\r\n\r\n  const clearHistory = () => {\r\n    setCaptureHistory([]);\r\n    toast.info('History cleared');\r\n  };\r\n\r\n  return (\r\n    <motion.div \r\n      className=\"emotion-detector\"\r\n      initial={{ opacity: 0, y: 20 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.5 }}\r\n    >\r\n      <WebcamCapture webcamRef={webcamRef} />\r\n      \r\n      <div className=\"controls\">\r\n        <motion.button \r\n          className=\"capture-button\"\r\n          onClick={captureAndAnalyze}\r\n          disabled={isProcessing}\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n        >\r\n          {isProcessing ? 'Processing...' : 'Detect Emotion'}\r\n        </motion.button>\r\n\r\n        {captureHistory.length > 0 && (\r\n          <motion.button \r\n            className=\"clear-button\"\r\n            onClick={clearHistory}\r\n            whileHover={{ scale: 1.05 }}\r\n            whileTap={{ scale: 0.95 }}\r\n          >\r\n            Clear History\r\n          </motion.button>\r\n        )}\r\n      </div>\r\n\r\n      {isProcessing && <LoadingSpinner />}\r\n      \r\n      <EmotionDisplay \r\n        emotions={emotions} \r\n        error={error} \r\n        history={captureHistory}\r\n      />\r\n\r\n      <ToastContainer\r\n        position=\"bottom-right\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n        newestOnTop\r\n        closeOnClick\r\n        rtl={false}\r\n        pauseOnFocusLoss\r\n        draggable\r\n        pauseOnHover\r\n      />\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default EmotionDetector;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}